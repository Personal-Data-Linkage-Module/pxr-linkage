# Copyright 2022 NEC Corporation
# Released under the MIT license.
# https://opensource.org/licenses/mit-license.php
#
apiVersion: v1
kind: ConfigMap
metadata:
  name: region000001-book-operate-service-container-config-map
  namespace: <namespace>
data:
  config.json: |
    {
      "operatorUrl": "http://localhost:3000/operator",
      "catalogUrl": "http://localhost:3003/pxr-block-proxy/?from_path=%2Fbook-operate&block=$pxr-root-block&path=%2Fcatalog",
      "bookManageUrl": "http://localhost:3003/pxr-block-proxy/?from_path=%2Fbook-operate&block=$pxr-root-block&path=%2Fbook-manage",
      "notificationUrl": "http://localhost:3004/notification",
      "accessControlUrl": "http://localhost:3015/access-control",
      "ctokenUrl": "http://localhost:3009/local-ctoken",
      "proxyUrl": "http://localhost:3003/pxr-block-proxy",
      "outerBlockStore": false,
      "rootBlock": 1000401,
      "passwordDigit": 8,
      "initialPasswordExpire": 7,
      "timezone": "Asia/Tokyo"
    }
  default.yml: |
    # SDE-IMPL-RECOMMENDED REST API サーバーのポート番号を指定します
    ports:
      http: 3006

    # SDE-IMPL-RECOMMENDED ログレベルを次のいずれかを設定します[none/debug/info]
    loglevel: info

    # SDE-MSA-PRIN 過負荷を回避する （MSA-PRIN-ID-02）
    # SDE-IMPL-RECOMMENDED Backpressureの設定をします
    backPressure:
      threshold: 10000  # 同時実行数しきい値

    # オペレータサービス情報
    operatorService:
      session: http://localhost:3000/operator/session/
  log4js.config.json: |
    {
      "appenders": {
        "ConsoleLogAppender": {
          "type": "console"
        },
        "SystemLogAppender": {
          "type": "dateFile",
          "filename": "./logs/system.log",
          "pattern": ".yyyy-MM-dd",
          "daysToKeep": 30,
          "alwaysIncludePattern": false,
          "layout": {
            "type": "pattern",
            "pattern": "[%d{yyyy-MM-dd hh:mm:ss.SSS}] [%p] %m"
          }
        },
        "HttpLogAppender": {
          "type": "dateFile",
          "filename": "./logs/http.log",
          "pattern": ".yyyy-MM-dd",
          "daysToKeep": 30,
          "alwaysIncludePattern": false,
          "layout": {
            "type": "pattern",
            "pattern": "[%d{yyyy-MM-dd hh:mm:ss.SSS}] [%p] [%x{sessionId}] [%x{requestId}] %m"
          }
        },
        "AccessLogAppender": {
          "type": "dateFile",
          "filename": "./logs/access.log",
          "pattern": ".yyyy-MM-dd",
          "daysToKeep": 30,
          "alwaysIncludePattern": false,
          "layout": {
            "type": "pattern",
            "pattern": "[%d{yyyy-MM-dd hh:mm:ss.SSS}] [%p] [%x{sessionId}] [%x{requestId}] %m"
          }
        },
        "ApplicationLogAppender": {
          "type": "dateFile",
          "filename": "./logs/application.log",
          "pattern": ".yyyy-MM-dd",
          "daysToKeep": 30,
          "alwaysIncludePattern": false,
          "layout": {
            "type": "pattern",
            "pattern": "[%d{yyyy-MM-dd hh:mm:ss.SSS}] [%p] [%x{sessionId}] [%x{requestId}] %m"
          }
        }
      },
      "replaceConsole": true,
      "categories": {
        "default": {
          "appenders": [
            "ConsoleLogAppender"
          ],
          "level": "all"
        },
        "system": {
          "appenders": [
            "SystemLogAppender"
          ],
          "level": "all"
        },
        "http": {
          "appenders": [
            "HttpLogAppender"
          ],
          "level": "all"
        },
        "access": {
          "appenders": [
            "AccessLogAppender"
          ],
          "level": "all"
        },
        "application": {
          "appenders": [
            "ApplicationLogAppender"
          ],
          "level": "all"
        }
      }
    }
  message.json: |
    {
      "RESPONSE_ERROR": "サービスからのレスポンスの制御処理に失敗しました",
      "UNDEFINED_ERROR": "未定義のエラーが発生しました",
      "REQUEST_IS_EMPTY": "リクエストが空です",
      "NOT_AUTHORIZED": "未ログイン状態でのリクエストはエラーです",
      "FAILED_TAKE_SESSION": "セッション情報の取得に失敗しました",
      "FAILED_TAKE_OPERATOR": "オペレーターの取得に失敗しました",
      "NOT_EXISTS_OPERATOR": "リクエストされたオペレーターは存在しません",
      "FAILED_CONNECT_TO_DATABASE": "データベースとの接続に失敗しました",
      "FAILED_SAVE_ENTITY": "データベースへのデータ登録に失敗しました",
      "UNEXPECTED_ARRAY_REQUEST": "配列でのリクエストは期待していません",
      "REQUEST_UNAUTORIZED": "権限が不足しています",
      "OPERATOR_RESPONSE": "オペレーターサービスからのレスポンス: %s",
      "OPERATOR_RESPONSE_STATUS": "オペレーターサービスからのステータスコード: %s",
      "IS_NOT_AUTHORIZATION_SESSION": "セッションは有効ではありません",
      "FAILED_CONNECT_TO_OPERATOR": "オペレーターサービスへの接続に失敗しました",
      "NO_SESSION": "未ログインです",
      "IDENTITY_RESPONSE": "本人性確認サービスからのレスポンス: %s",
      "IDENTITY_RESPONSE_STATUS": "本人性確認サービスからのステータスコード: %s",
      "FAILED_IDENTITY_GET": "本人性確認情報の取得に失敗しました",
      "FAILED_CONNECT_TO_IDENTITY": "本人性確認サービスへの接続に失敗しました",
      "SEARCH_WITH_USER_ID_IS_FORBIDDEN": "運営メンバーが、userIdを指定しての利用者一覧検索を利用することはできません",
      "SEARCH_INCLUDE_REQUEST_IS_FORBIDDEN": "運営メンバー以外が、申請中を含むオプションで利用者一覧検索を利用することはできません",
      "TARGET_NO_DATA": "対象データが見つかりません",
      "TARGET_NO_THING": "イベントに紐づくモノデータが見つかりません",
      "BOOK_COOPERATE_EXISTS": "利用者ID連携が既に存在します",
      "CATALOG_RESPONSE_STATUS": "カタログサービスからのステータスコード: %s",
      "CATALOG_RESPONSE": "カタログサービスからのレスポンス: %s",
      "FAILED_CATALOG_GET": "カタログ情報の取得に失敗しました",
      "FAILED_CONNECT_TO_CATALOG": "カタログサービスへの接続に失敗しました",
      "FAILED_OPERATOR": "オペレーターサービスの処理に失敗しました",
      "MISMATCH_OPERATOR_BLOCK_TYPE_AND_SERVICE_CODE": "オペレータの所属ブロックと設定されたサービスのコードが不整合です",
      "NOT_FOUND_ACTOR_CATALOG": "アクターカタログの取得に失敗しました",
      "INVALID_OPERATOR_BLOCK_TYPE": "オペレータの所属ブロックが適切ではありません",
      "NOT_IDENTIFICATION_CATALOG_CODE": "本人性確認以外のカタログコードが含まれています",
      "VERIFICATION_RATIO_NOT_ENOUGH": "本人性確認書類が不足しています",
      "NOT_IDENTIFICATION_ITEM": "本人性確認事項を指定してください",
      "NOT_IDENTIFICATION_DOCUMENT_CATALOG_CODE": "本人性確認書類を指定してください",
      "PXR_ID_EXISTS": "指定されたPXR-IDは既に登録されています",
      "BOOK_EXISTS": "既にBookが存在します",
      "DATE_SCOPE_INVALID": "日付指定の範囲に誤りがあります",
      "EMPTY_APP": "APPが設定されていません",
      "SET_APP_REGION": "APP、REGIONの2つが設定されています",
      "EMPTY_PXR_ID": "PXR-IDが取得できませんでした",
      "EMPTY_USER_ID": "利用者IDが取得できませんでした",
      "SET_IDENTIFIER_AND_SOURCE_ID": "対象データ種の識別子とソースIDは同時に指定できません",
      "ACTOR_CATALOG_INVALID": "指定されたアクターカタログコードは対象アクターのカタログコードではありません",
      "APP_CATALOG_CODE_NOT_EXIST": "指定されたアプリケーションカタログコードがアクターカタログ内にありません",
      "NOT_STORE_CATALOG_CODE": "蓄積可能なデータ定義が見つかりません",
      "NOT_EVENT_CATALOG_CODE": "蓄積可能なデータ定義に指定されたイベントが見つかりませんでした",
      "NOT_THING_CATALOG_CODE": "指定されたイベントにモノカタログコードが紐づいていません",
      "THING_CATALOG_CODE_NOT_EXIST": "イベントに紐づいていないモノカタログコードが指定されています",
      "NOT_EXIST_BOOK": "PXR-IDからブックが取得できませんでした",
      "NO_PARAM": "%sが不足しています",
      "EMPTY_PARAM": "%sが空です",
      "NO_ARRAY_PARAM": "%sが配列ではありません",
      "NUMBER_INVALID": "%sが数値ではありません",
      "NOT_FOUND_DATA_STORE_SETTING": "データ蓄積定義が取得できませんでした",
      "NOT_FOUND_DATA_TYPE": "データ種が取得できませんでした",
      "EMPTY_APP_CATALOG_CODE": "appが指定されていません",
      "NOT_FOUND_BOOK_ID": "利用者IDからブックIDが取得できませんでした",
      "COULD_NOT_SPECIFY_USER_BOOK": "ユーザーのBookを特定できませんでした",
      "DATE_INVALID": "%sが日付形式(YYYY-MM-DDTHH:mm:ss.SSSZZ)ではありません",
      "BOOK_MANAGE_BOOK_LIST_RESPONSE_STATUS": "My-Condition-Book管理サービス My-Condition-Book一覧取得からのステータスコード: %s",
      "BOOK_MANAGE_BOOK_LIST_RESPONSE": "My-Condition-Book管理サービス My-Condition-Book一覧取得からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_BOOK_LIST": "MyConditionBook管理サービス My-Condition-Book一覧取得に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_BOOK_LIST": "MyConditionBook管理サービス My-Condition-Book一覧取得への接続に失敗しました",
      "BOOK_MANAGE_USERIDCOOPERATE_RESPONSE_STATUS": "My-Condition-Book管理サービス 利用者ID連携からのステータスコード: %s",
      "BOOK_MANAGE_USERIDCOOPERATE_RESPONSE": "My-Condition-Book管理サービス 利用者ID連携からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_USERIDCOOPERATE": "MyConditionBook管理サービス 利用者ID連携に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_USERIDCOOPERATE": "MyConditionBook管理サービス 利用者ID連携への接続に失敗しました",
      "BOOK_MANAGE_TEMPSHARECODECOOPERATE_RESPONSE_STATUS": "My-Condition-Book管理サービス 一時的共有コード照合からのステータスコード: %s",
      "BOOK_MANAGE_TEMPSHARECODECOOPERATE_RESPONSE": "My-Condition-Book管理サービス 一時的共有コード照合からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_TEMPSHARECODECOOPERATE": "MyConditionBook管理サービス 一時的共有コード照合に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_TEMPSHARECODECOOPERATE": "MyConditionBook管理サービス 一時的共有コード照合への接続に失敗しました",
      "BOOK_MANAGE_GETDATASHAREDEFINED_RESPONSE_STATUS": "My-Condition-Book管理サービス データ共有定義取得からのステータスコード: %s",
      "BOOK_MANAGE_GETDATASHAREDEFINED_RESPONSE": "My-Condition-Book管理サービス データ共有定義取得からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_GETDATASHAREDEFINED": "MyConditionBook管理サービス データ共有定義取得に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_GETDATASHAREDEFINED": "MyConditionBook管理サービス データ共有定義取得への接続に失敗しました",
      "BOOK_MANAGE_CANCELUSERIDCOOPERATE_RESPONSE_STATUS": "My-Condition-Book管理サービス 利用者ID連携解除からのステータスコード: %s",
      "BOOK_MANAGE_CANCELUSERIDCOOPERATE_RESPONSE": "My-Condition-Book管理サービス 利用者ID連携解除からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_CANCELUSERIDCOOPERATE": "MyConditionBook管理サービス 利用者ID連携解除に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_CANCELUSERIDCOOPERATE": "MyConditionBook管理サービス 利用者ID連携解除への接続に失敗しました",
      "CTOKEN_POST_RESPONSE_STATUS": "Local-CTokenサービス Local-CToken登録からのステータスコード: %s",
      "CTOKEN_POST_RESPONSE": "Local-CTokenサービス Local-CToken登録からのレスポンス: %s",
      "FAILED_CTOKEN_POST": "Local-CTokenサービス Local-CToken登録に失敗しました",
      "FAILED_CONNECT_TO_CTOKEN_POST": "Local-CToken Local-CToken登録への接続に失敗しました",
      "NOTIFICATION_RESPONSE_STATUS": "通知サービスからのステータスコード: %s",
      "NOTIFICATION_RESPONSE": "通知サービスからのレスポンス: %s",
      "FAILED_NOTIFICATION_POST": "通知サービスの登録に失敗しました",
      "FAILED_NOTIFICATION_GET": "通知サービスの取得に失敗しました",
      "FAILED_CONNECT_TO_NOTIFICATION": "通知サービスへの接続に失敗しました",
      "BOOK_OPERATE_USER_ADD_TITLE": "利用者作成完了",
      "BOOK_OPERATE_USER_ADD_CONTENT": "利用者ID%sの利用者作成および連携が完了しました",
      "BOOK_OPERATE_USER_ADD_TITLE_IND": "利用者ID連携完了",
      "BOOK_OPERATE_USER_ADD_CONTENT_IND": "%sの利用者ID連携が完了しました",
      "BOOK_OPERATE_USER_CENCEL_TITLE": "利用者削除完了",
      "BOOK_OPERATE_USER_CENCEL_CONTENT": "利用者ID%sの利用者削除および連携解除が完了しました",
      "BOOK_MANAGE_DATA_ACCUMU_GET_RESPONSE_STATUS": "My-Condition-Book管理サービス データ蓄積定義取得からのステータスコード: %s",
      "BOOK_MANAGE_DATA_ACCUMU_GET_RESPONSE": "My-Condition-Book管理サービス データ蓄積定義取得からのレスポンス: %s",
      "FAILED_BOOK_MANAGE_DATA_ACCUMU_GET": "MyConditionBook管理サービス データ蓄積定義取得に失敗しました",
      "FAILED_CONNECT_TO_BOOK_MANAGE_DATA_ACCUMU_GET": "MyConditionBook管理サービス データ蓄積定義取得への接続に失敗しました",
      "VALUE_INVALID": "%sが%sではありません",
      "RESPONSE_FAIL": "%sに失敗しました",
      "STRING_INVALID": "%sが文字列ではありません",
      "VALUE_NOT_VALID": "%sの値が有効ではありません",
      "IS_DEFINED_TYPE_IDENTIFIER": "type, identifierのいずれかの指定が必須です",
      "NO_DATA_TYPES": "document, event, thingのうちいずれも設定されていません",
      "FAILED_LINKAGE": "連携に失敗しました",
      "FAILED_CONNECT_TO_LINKAGE_SERVICE": "連携サービスとの接続に失敗しました",
      "NOT_EXIST_EVENT": "対象のイベントが存在しません",
      "validation": {
        "isArray": "配列ではありません",
        "isBoolean": "真偽値ではありません",
        "isBooleanString": "真偽値への変換に失敗しました",
        "isDate": "日付型ではありません",
        "isDateString": "日付型への変換に失敗しました",
        "isEmail": "Emailアドレスではありません",
        "isEmpty": "この値は空である必要があります",
        "isNumber": "数値ではありません",
        "isNumberString": "数値への変換に失敗しました",
        "isNotEmpty": "この値は空を期待しません",
        "isUuid": "UUIDではありません",
        "isString": "文字列ではありません",
        "isObject": "JSONではありません",
        "isDefined": "この値は必須値です",
        "matches": "document, event, thingのいずれかの値である必要があります",
        "nestedValidation": "オブジェクト配列である必要があります",
        "isNotObject": "この値には、配列やJSONを設定することはできません"
      },
      "IF_WF_HAS_BEEN_SPECIFIED": "WFオブジェクトが指定されています",
      "UNSUPPORTED_ACTOR": "未サポートのアクター種別です"
    }
  openapi.json: |
    {
      "openapi": "3.0.2",
      "info": {
        "title": "book-operate",
        "version": "1.0",
        "description": "My-Condition-Book運用サービス"
      },
      "servers": [
        {
          "url": "/book-operate/book-operate"
        }
      ],
      "paths": {
        "/user": {
          "post": {
            "tags": [
              "利用者作成"
            ],
            "description": "app,wfどちらかのリクエストを受け、MyConditionBook利用者を登録します。利用者作成条件は、未登録であること、カタログにコードが存在すること、利用者ID連携が成功していること。",
            "requestBody": {
              "description": "利用者作成のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "利用者作成のリクエストボディ",
                    "properties": {
                      "identifyCode": {
                        "type": "string",
                        "description": "本人性確認コード"
                      },
                      "attributes": {
                        "type": "object",
                        "description": "属性"
                      }
                    },
                    "example": {
                      "identifyCode": "ukO8z+Xf8vv7yxXQj2Hpo",
                      "attributes": {}
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "利用者作成に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "利用者作成のレスポンスボディ",
                      "properties": {
                        "actor": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーションカタログ",
                          "$ref": "#/components/schemas/_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフローカタログ",
                          "$ref": "#/components/schemas/_code"
                        },
                        "userId": {
                          "type": "string",
                          "description": "利用者ID"
                        },
                        "establishAt": {
                          "type": "string",
                          "description": "開設日時"
                        },
                        "attributes": {
                          "type": "object",
                          "description": "属性"
                        }
                      }
                    },
                    "example": {
                      "actor": {
                        "_value": 1000004,
                        "_ver": 1
                      },
                      "app": null,
                      "wf": {
                        "_value": 1000004,
                        "_ver": 1
                      },
                      "userId": "123456789",
                      "establishAt": "2020-02-17T00:00:00.000+0900",
                      "attributes": {}
                    }
                  }
                }
              }
            }
          }
        },
        "/user/delete": {
          "post": {
            "tags": [
              "利用者削除"
            ],
            "description": "本人性確認コードを受け利用者ID連携を無効化し、PXRポータルの個人へ通知します。",
            "requestBody": {
              "description": "利用者削除のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "利用者削除のリクエストボディ",
                    "properties": {
                      "identifyCode": {
                        "type": "string",
                        "description": "本人性確認コード"
                      }
                    },
                    "example": {
                      "identifyCode": "ukO8z+Xf8vv7yxXQj2Hpo"
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "利用者削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "利用者削除のレスポンスボディ",
                      "properties": {
                        "identifyCode": {
                          "type": "string",
                          "description": "本人性確認コード"
                        }
                      }
                    },
                    "example": {
                      "identifyCode": "ukO8z+Xf8vv7yxXQj2Hpo"
                    }
                  }
                }
              }
            }
          }
        },
        "/user/batch": {
          "post": {
            "tags": [
              "利用者作成(バッチ)"
            ],
            "description": "Book管理から連携済の利用者ID情報を取得し、このBlockに登録されていない利用者を作成します。",
            "requestBody": {
              "description": "利用者作成のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object"
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "利用者作成に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "利用者作成のレスポンスボディ",
                      "properties": {
                        "status": {
                          "type": "string"
                        }
                      }
                    },
                    "example": {
                      "status": "OK"
                    }
                  }
                }
              }
            }
          }
        },
        "/user/list": {
          "post": {
            "tags": [
              "利用者一覧検索"
            ],
            "description": "リクエスト条件に伴いMyConditionBookを検索し、MyConditionBook管理の利用者ID連携取得を呼出し結果を返します。",
            "requestBody": {
              "description": "利用者一覧検索のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "利用者一覧検索のリクエストボディ",
                    "properties": {
                      "userId": {
                        "type": "array",
                        "description": "利用者IDリスト",
                        "items": {
                          "type": "string",
                          "description": "利用者ID"
                        }
                      },
                      "establishAt": {
                        "type": "object",
                        "description": "検索対象開設日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索対象開設日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索対象開設日時(至)"
                          }
                        }
                      },
                      "includeRequest": {
                        "type": "boolean",
                        "description": "申請中を含んでレスポンスするかどうか"
                      }
                    },
                    "example": {
                      "userId": [
                        "123456789",
                        "222222222"
                      ],
                      "establishAt": {
                        "start": "2020-01-01T00:00:00.000+0900",
                        "end": "2020-12-01T00:00:00.000+0900"
                      },
                      "includeRequest": true
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "利用者一覧検索に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "利用者一覧検索のレスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/userListOneOf"
                      }
                    },
                    "example": [
                      {
                        "status": 1,
                        "app": null,
                        "wf": {
                          "_value": 1000004,
                          "_ver": 1
                        },
                        "userId": "123456789",
                        "establishAt": "2020-02-17T00:00:00.000+0900",
                        "attributes": {},
                        "store": [
                          {
                            "event": {
                              "_value": 1000008,
                              "_ver": 1
                            },
                            "thing": [
                              {
                                "_value": 1000011,
                                "_ver": 1
                              },
                              {
                                "_value": 1000012,
                                "_ver": 1
                              }
                            ]
                          }
                        ]
                      },
                      {
                        "status": 0,
                        "identifyCode": "Mjk2MTdmZmUtZTBjMy00ZGM3LTkxYjItZWU1ZGUzMjU3Yjlm"
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/event/{userId}": {
          "post": {
            "tags": [
              "イベント蓄積"
            ],
            "description": "利用者ID、イベントを受け、Bookへ登録する。データ蓄積条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              }
            ],
            "requestBody": {
              "description": "イベント蓄積のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "イベント蓄積のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "環境設定",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "イベント蓄積に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "イベント蓄積のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          },
          "put": {
            "tags": [
              "ソースIDによるイベント更新"
            ],
            "description": "ソースID、利用者ID、イベントを受け、Bookのイベントを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること、およびソースIDに紐づくイベントが1つであること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "query",
                "name": "eventSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "requestBody": {
              "description": "ソースIDによるイベント更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "ソースIDによるイベント更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "ソースIDによるイベント更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるイベント更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "ソースIDによるイベント削除"
            ],
            "description": "ソースIDを受け、Bookのイベントを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "query",
                "name": "eventSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "ソースIDによるイベント削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるイベント削除のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          }
        },
        "/event/{userId}/{eventId}": {
          "put": {
            "tags": [
              "イベント更新"
            ],
            "description": "ID、利用者ID、イベントを受け、Bookのイベントを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                }
              }
            ],
            "requestBody": {
              "description": "イベント更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "イベント更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "イベント更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "イベント更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "イベント削除"
            ],
            "description": "IDを受け、Bookのイベントを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": "1"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "イベント削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "イベント削除のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          }
        },
        "/thing/{userId}/{eventId}": {
          "post": {
            "tags": [
              "モノ追加"
            ],
            "description": "利用者ID、イベント識別子、モノを受け、Bookのイベントにモノを追加する。データ蓄積条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": 1
                }
              }
            ],
            "requestBody": {
              "description": "モノ追加のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "モノ追加のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "環境設定",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "モノ追加に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "モノ追加のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "thing": [
                        {
                          "id": 1,
                          "eventId": 1,
                          "sourceId": "20200221-1",
                          "thingIdentifier": "thing-4f75161a-449a-4839-be6a-4cc577b8a8d0",
                          "thingCatalogCode": 1000008,
                          "thingCatalogVersion": 1,
                          "thingActorCode": 1000004,
                          "thingActorVersion": 1,
                          "wfCatalogCode": null,
                          "wfCatalogVersion": null,
                          "wfRoleCode": null,
                          "wfRoleVersion": null,
                          "wfStaffIdentifier": null,
                          "appCatalogCode": 1000007,
                          "appCatalogVersion": 1,
                          "template": {
                            "id": {
                              "index": "4_1_1",
                              "value": "4f75161a-449a-4839-be6a-4cc577b8a8d0"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000008,
                                "_ver": 1
                              }
                            },
                            "sourceId": "20200221-1",
                            "env": null,
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            },
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            }
                          },
                          "attributes": null,
                          "isDisabled": false,
                          "createdBy": "pxr_user",
                          "createdAt": "2020-08-31T14:45:01.000+0900",
                          "updatedBy": "pxr_user",
                          "updatedAt": "2020-08-31T14:45:01.000+0900"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "put": {
            "tags": [
              "ソースIDによるモノ更新"
            ],
            "description": "ソースID、利用者ID、イベントを受け、Bookのモノを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること、およびソースIDに紐づくイベントが1つであること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": 1
                }
              },
              {
                "in": "query",
                "name": "thingSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "モノのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "requestBody": {
              "description": "ソースIDによるモノ更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "ソースIDによるモノ更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "ソースIDによるモノ更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるモノ更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "thing": [
                        {
                          "id": 1,
                          "eventId": 1,
                          "sourceId": "20200221-1",
                          "thingIdentifier": "thing-4f75161a-449a-4839-be6a-4cc577b8a8d0",
                          "thingCatalogCode": 1000008,
                          "thingCatalogVersion": 1,
                          "thingActorCode": 1000004,
                          "thingActorVersion": 1,
                          "wfCatalogCode": null,
                          "wfCatalogVersion": null,
                          "wfRoleCode": null,
                          "wfRoleVersion": null,
                          "wfStaffIdentifier": null,
                          "appCatalogCode": 1000007,
                          "appCatalogVersion": 1,
                          "template": {
                            "id": {
                              "index": "4_1_1",
                              "value": "4f75161a-449a-4839-be6a-4cc577b8a8d0"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000008,
                                "_ver": 1
                              }
                            },
                            "sourceId": "20200221-1",
                            "env": null,
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            },
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            }
                          },
                          "attributes": null,
                          "isDisabled": false,
                          "createdBy": "pxr_user",
                          "createdAt": "2020-08-31T14:45:01.000+0900",
                          "updatedBy": "pxr_user",
                          "updatedAt": "2020-08-31T14:45:01.000+0900"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "ソースIDによるモノ削除"
            ],
            "description": "ソースIDを受け、Bookのモノを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": 1
                }
              },
              {
                "in": "query",
                "name": "thingSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "モノのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "ソースIDによるモノ削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるモノ削除のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "thing": [
                        {
                          "id": 1,
                          "eventId": 1,
                          "sourceId": "20200221-1",
                          "thingIdentifier": "thing-4f75161a-449a-4839-be6a-4cc577b8a8d0",
                          "thingCatalogCode": 1000008,
                          "thingCatalogVersion": 1,
                          "thingActorCode": 1000004,
                          "thingActorVersion": 1,
                          "wfCatalogCode": null,
                          "wfCatalogVersion": null,
                          "wfRoleCode": null,
                          "wfRoleVersion": null,
                          "wfStaffIdentifier": null,
                          "appCatalogCode": 1000007,
                          "appCatalogVersion": 1,
                          "template": {
                            "id": {
                              "index": "4_1_1",
                              "value": "4f75161a-449a-4839-be6a-4cc577b8a8d0"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000008,
                                "_ver": 1
                              }
                            },
                            "sourceId": "20200221-1",
                            "env": null,
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            },
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            }
                          },
                          "attributes": null,
                          "isDisabled": false,
                          "createdBy": "pxr_user",
                          "createdAt": "2020-08-31T14:45:01.000+0900",
                          "updatedBy": "pxr_user",
                          "updatedAt": "2020-08-31T14:45:01.000+0900"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "/thing/{userId}/{eventId}/{thingId}": {
          "put": {
            "tags": [
              "モノ更新"
            ],
            "description": "イベント識別子、利用者ID、モノのソースID、モノを受け、Bookのモノを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": 1
                }
              },
              {
                "in": "path",
                "name": "thingId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "モノID",
                  "example": 1
                }
              }
            ],
            "requestBody": {
              "description": "モノ更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "モノ更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ID",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "イベント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "start": {
                        "type": "object",
                        "description": "イベント開始時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "end": {
                        "type": "object",
                        "description": "イベント終了時間",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "location": {
                        "type": "object",
                        "description": "イベント発生位置",
                        "$ref": "#/components/schemas/_index_value"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "env": {
                        "type": "object",
                        "description": "",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "モノ更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "モノ更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "thing": [
                        {
                          "id": 1,
                          "eventId": 1,
                          "sourceId": "20200221-1",
                          "thingIdentifier": "thing-4f75161a-449a-4839-be6a-4cc577b8a8d0",
                          "thingCatalogCode": 1000008,
                          "thingCatalogVersion": 1,
                          "thingActorCode": 1000004,
                          "thingActorVersion": 1,
                          "wfCatalogCode": null,
                          "wfCatalogVersion": null,
                          "wfRoleCode": null,
                          "wfRoleVersion": null,
                          "wfStaffIdentifier": null,
                          "appCatalogCode": 1000007,
                          "appCatalogVersion": 1,
                          "template": {
                            "id": {
                              "index": "4_1_1",
                              "value": "4f75161a-449a-4839-be6a-4cc577b8a8d0"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000008,
                                "_ver": 1
                              }
                            },
                            "sourceId": "20200221-1",
                            "env": null,
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            },
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            }
                          },
                          "attributes": null,
                          "isDisabled": false,
                          "createdBy": "pxr_user",
                          "createdAt": "2020-08-31T14:45:01.000+0900",
                          "updatedBy": "pxr_user",
                          "updatedAt": "2020-08-31T14:45:01.000+0900"
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "モノ削除"
            ],
            "description": "イベント識別子、利用者ID、モノのソースIDを受け、Bookのモノを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": "1"
                }
              },
              {
                "in": "path",
                "name": "thingId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "モノID",
                  "example": "1"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "モノ削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "モノ削除のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "thing": [
                        {
                          "id": 1,
                          "eventId": 1,
                          "sourceId": "20200221-1",
                          "thingIdentifier": "thing-4f75161a-449a-4839-be6a-4cc577b8a8d0",
                          "thingCatalogCode": 1000008,
                          "thingCatalogVersion": 1,
                          "thingActorCode": 1000004,
                          "thingActorVersion": 1,
                          "wfCatalogCode": null,
                          "wfCatalogVersion": null,
                          "wfRoleCode": null,
                          "wfRoleVersion": null,
                          "wfStaffIdentifier": null,
                          "appCatalogCode": 1000007,
                          "appCatalogVersion": 1,
                          "template": {
                            "id": {
                              "index": "4_1_1",
                              "value": "4f75161a-449a-4839-be6a-4cc577b8a8d0"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000008,
                                "_ver": 1
                              }
                            },
                            "sourceId": "20200221-1",
                            "env": null,
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            },
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            }
                          },
                          "attributes": null,
                          "isDisabled": false,
                          "createdBy": "pxr_user",
                          "createdAt": "2020-08-31T14:45:01.000+0900",
                          "updatedBy": "pxr_user",
                          "updatedAt": "2020-08-31T14:45:01.000+0900"
                        }
                      ]
                    }
                  }
                }
              }
            }
          }
        },
        "/thing/bulk/{userId}/{eventId}": {
          "post": {
            "tags": [
              "モノ一括追加"
            ],
            "description": "利用者ID、イベント識別子、複数のモノを受け、Bookのイベントにモノを一括追加する。データ蓄積条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "eventId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "イベントID",
                  "example": 1
                }
              }
            ],
            "requestBody": {
              "description": "モノ一括追加のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "array",
                    "description": "複数モノ",
                    "items": {
                      "type": "object",
                      "description": "モノ一括追加のリクエストボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ID",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "イベント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "start": {
                          "type": "object",
                          "description": "イベント開始時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "end": {
                          "type": "object",
                          "description": "イベント終了時間",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "location": {
                          "type": "object",
                          "description": "イベント発生位置",
                          "$ref": "#/components/schemas/_index_value"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "env": {
                          "type": "object",
                          "description": "環境設定",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "thing": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": null
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          },
                          "staffId": {
                            "index": "3_5_4",
                            "value": "test"
                          }
                        },
                        "thing": []
                      }
                    ]
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "モノ追加に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "複数モノ",
                      "items": {
                        "type": "object",
                        "description": "モノ追加のレスポンスボディ",
                        "properties": {
                          "id": {
                            "type": "object",
                            "description": "ID",
                            "$ref": "#/components/schemas/_index_code"
                          },
                          "code": {
                            "type": "object",
                            "description": "イベント種別カタログ",
                            "$ref": "#/components/schemas/_index_code"
                          },
                          "start": {
                            "type": "object",
                            "description": "イベント開始時間",
                            "$ref": "#/components/schemas/_index_value"
                          },
                          "end": {
                            "type": "object",
                            "description": "イベント終了時間",
                            "$ref": "#/components/schemas/_index_value"
                          },
                          "location": {
                            "type": "object",
                            "description": "イベント発生位置",
                            "$ref": "#/components/schemas/_index_value"
                          },
                          "sourceId": {
                            "type": "string",
                            "description": "ソースID"
                          },
                          "env": {
                            "type": "object",
                            "description": "環境設定",
                            "$ref": "#/components/schemas/_index_code"
                          },
                          "app": {
                            "type": "object",
                            "description": "アプリケーション",
                            "$ref": "#/components/schemas/_index_code"
                          },
                          "wf": {
                            "type": "object",
                            "description": "ワークフロー",
                            "$ref": "#/components/schemas/_index_code"
                          },
                          "thing": {
                            "type": "object",
                            "description": "モノ",
                            "$ref": "#/components/schemas/_index_code"
                          }
                        }
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          },
                          "staffId": {
                            "index": "3_5_4",
                            "value": "test"
                          }
                        },
                        "thing": []
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/book/search": {
          "post": {
            "tags": [
              "Book参照"
            ],
            "description": "利用者IDを受け、BOOKを返却します。",
            "requestBody": {
              "description": "Book参照のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "Book参照のリクエストボディ",
                    "properties": {
                      "userId": {
                        "type": "string",
                        "description": "利用者ID"
                      },
                      "type": {
                        "type": "string",
                        "description": "タイプ(document, event, thing)"
                      },
                      "identifier": {
                        "type": "array",
                        "description": "識別子",
                        "items": {
                          "type": "string",
                          "description": "識別子"
                        }
                      },
                      "updatedAt": {
                        "type": "object",
                        "description": "検索対象更新日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索対象更新日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索対象更新日時(至)"
                          }
                        }
                      },
                      "_code": {
                        "type": "array",
                        "description": "複数モノ",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "wf": {
                        "type": "object",
                        "description": "検索対象ワークフローオブジェクト",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      },
                      "app": {
                        "type": "object",
                        "description": "検索対象アプリケーションオブジェクト",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      }
                    },
                    "example": {
                      "userId": "123456789",
                      "type": "event",
                      "identifier": [
                        "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                      ],
                      "updatedAt": {
                        "start": "2020-01-01T00:00:00.000+0900",
                        "end": "2020-12-01T00:00:00.000+0900"
                      },
                      "_code": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "app": null,
                      "wf": {
                        "_value": 1000007
                      }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "Book参照に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "Book参照のレスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/bookListOneOf"
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": null
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          }
                        },
                        "thing": [
                          {
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000046,
                                "_ver": 1
                              }
                            },
                            "env": {
                              "id": "",
                              "code": {
                                "_value": 1000058,
                                "_ver": 1
                              }
                            },
                            "sourceId": "",
                            "id": {
                              "index": "4_1_1",
                              "value": null
                            },
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            }
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/share": {
          "post": {
            "tags": [
              "データ共有によるデータ取得"
            ],
            "description": "利用者IDを受け、共有許可されているすべてのBlockのデータを取得後、統合処理を行って返却します。",
            "requestBody": {
              "description": "データ共有によるデータ取得のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "データ共有によるデータ取得のリクエストボディ",
                    "properties": {
                      "userId": {
                        "type": "string",
                        "description": "利用者ID"
                      },
                      "identifier": {
                        "type": "array",
                        "description": "識別子",
                        "items": {
                          "type": "string",
                          "description": "識別子"
                        }
                      },
                      "updatedAt": {
                        "type": "object",
                        "description": "検索対象更新日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索対象更新日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索対象更新日時(至)"
                          }
                        }
                      },
                      "document": {
                        "type": "array",
                        "description": "複数ドキュメント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "event": {
                        "type": "array",
                        "description": "複数イベント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "thing": {
                        "type": "array",
                        "description": "複数モノ",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      }
                    },
                    "example": {
                      "userId": "123456789",
                      "identifier": [
                        "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                      ],
                      "updatedAt": {
                        "start": "2020-01-01T00:00:00.000+0900",
                        "end": "2020-12-01T00:00:00.000+0900"
                      },
                      "document": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "event": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "thing": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "データ共有によるデータ取得に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "データ共有によるデータ取得のレスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/bookListOneOf"
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": null
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          }
                        },
                        "thing": [
                          {
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000046,
                                "_ver": 1
                              }
                            },
                            "env": {
                              "id": "",
                              "code": {
                                "_value": 1000058,
                                "_ver": 1
                              }
                            },
                            "sourceId": "",
                            "id": {
                              "index": "4_1_1",
                              "value": null
                            },
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            }
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/share/temp": {
          "post": {
            "tags": [
              "一時的データ共有によるデータ取得"
            ],
            "description": "一時的データ共有コードを受け、共有許可されているすべてのBlockのデータを取得後、統合処理を行って返却します。",
            "requestBody": {
              "description": "一時的データ共有によるデータ取得のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "一時的データ共有によるデータ取得のリクエストボディ",
                    "properties": {
                      "userId": {
                        "type": "string",
                        "description": "一時的データ共有コード"
                      },
                      "identifier": {
                        "type": "array",
                        "description": "識別子",
                        "items": {
                          "type": "string",
                          "description": "識別子"
                        }
                      },
                      "updatedAt": {
                        "type": "object",
                        "description": "検索対象更新日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索対象更新日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索対象更新日時(至)"
                          }
                        }
                      },
                      "document": {
                        "type": "array",
                        "description": "複数ドキュメント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "event": {
                        "type": "array",
                        "description": "複数イベント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "thing": {
                        "type": "array",
                        "description": "複数モノ",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      }
                    },
                    "example": {
                      "tempShareCode": "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6",
                      "identifier": [
                        "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                      ],
                      "updatedAt": {
                        "start": "2020-01-01T00:00:00.000+0900",
                        "end": "2020-12-01T00:00:00.000+0900"
                      },
                      "document": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "event": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "thing": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "一時的データ共有によるデータ取得に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "一時的データ共有によるデータ取得のレスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/bookListOneOf"
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": null
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          }
                        },
                        "thing": [
                          {
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000046,
                                "_ver": 1
                              }
                            },
                            "env": {
                              "id": "",
                              "code": {
                                "_value": 1000058,
                                "_ver": 1
                              }
                            },
                            "sourceId": "",
                            "id": {
                              "index": "4_1_1",
                              "value": null
                            },
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            }
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/share/search": {
          "post": {
            "tags": [
              "データ共有"
            ],
            "description": "データ共有されたデータを取得します。",
            "requestBody": {
              "description": "データ共有のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "データ共有のリクエストボディ",
                    "properties": {
                      "userId": {
                        "type": "string",
                        "description": "利用者ID"
                      },
                      "identifier": {
                        "type": "array",
                        "description": "識別子",
                        "items": {
                          "type": "string",
                          "description": "識別子"
                        }
                      },
                      "updatedAt": {
                        "type": "object",
                        "description": "検索対象更新日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索対象更新日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索対象更新日時(至)"
                          }
                        }
                      },
                      "app": {
                        "type": "object",
                        "description": "検索対象アプリケーションオブジェクト",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      },
                      "wf": {
                        "type": "object",
                        "description": "検索対象ワークフローオブジェクト",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      },
                      "document": {
                        "type": "array",
                        "description": "複数ドキュメント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "event": {
                        "type": "array",
                        "description": "複数イベント",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "thing": {
                        "type": "array",
                        "description": "複数モノ",
                        "items": {
                          "type": "object",
                          "description": "アクターカタログ",
                          "$ref": "#/components/schemas/_code"
                        }
                      }
                    },
                    "example": {
                      "userId": "123456789",
                      "identifier": [
                        "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                      ],
                      "updatedAt": {
                        "start": "2020-01-01T00:00:00.000+0900",
                        "end": "2020-12-01T00:00:00.000+0900"
                      },
                      "document": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "event": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ],
                      "thing": [
                        {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "データ共有に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "データ共有のレスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/bookListOneOf"
                      }
                    },
                    "example": [
                      {
                        "id": {
                          "index": "3_1_1",
                          "value": null
                        },
                        "code": {
                          "index": "3_1_2",
                          "value": {
                            "_value": 1000008,
                            "_ver": 1
                          }
                        },
                        "start": {
                          "index": "3_2_1",
                          "value": "2020-02-20T00:00:00.000+0900"
                        },
                        "end": {
                          "index": "3_2_2",
                          "value": "2020-02-21T00:00:00.000+0900"
                        },
                        "location": {
                          "index": "3_3_1",
                          "value": null
                        },
                        "sourceId": "20200221-1",
                        "env": null,
                        "app": null,
                        "wf": {
                          "code": {
                            "index": "3_5_1",
                            "value": {
                              "_value": 1000004,
                              "_ver": 1
                            }
                          },
                          "wf": {
                            "index": "3_5_2",
                            "value": {
                              "_value": 1000007,
                              "_ver": 1
                            }
                          },
                          "role": {
                            "index": "3_5_3",
                            "value": {
                              "_value": 1000005,
                              "_ver": 1
                            }
                          }
                        },
                        "thing": [
                          {
                            "acquired_time": {
                              "index": "4_2_2_4",
                              "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                            },
                            "code": {
                              "index": "4_1_2",
                              "value": {
                                "_value": 1000046,
                                "_ver": 1
                              }
                            },
                            "env": {
                              "id": "",
                              "code": {
                                "_value": 1000058,
                                "_ver": 1
                              }
                            },
                            "sourceId": "",
                            "id": {
                              "index": "4_1_1",
                              "value": null
                            },
                            "x-axis": {
                              "index": "4_2_2_1",
                              "value": null
                            },
                            "y-axis": {
                              "index": "4_2_2_2",
                              "value": null
                            },
                            "z-axis": {
                              "index": "4_2_2_3",
                              "value": null
                            }
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/ind/accesslog": {
          "post": {
            "tags": [
              "個人用共有アクセスログ取得"
            ],
            "description": "利用者IDを受け、アクセスログを取得する。",
            "requestBody": {
              "description": "個人用共有アクセスログ取得のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "個人用共有アクセスログ取得のリクエストボディ",
                    "properties": {
                      "accessAt": {
                        "type": "object",
                        "description": "検索日時",
                        "properties": {
                          "start": {
                            "type": "string",
                            "description": "検索開始日時(自)"
                          },
                          "end": {
                            "type": "string",
                            "description": "検索開始日時(至)"
                          }
                        }
                      },
                      "app": {
                        "type": "object",
                        "description": "検索対象アプリケーション",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      },
                      "wf": {
                        "type": "object",
                        "description": "検索対象ワークフロー",
                        "properties": {
                          "_value": {
                            "type": "integer",
                            "description": "検索対象コード"
                          }
                        }
                      },
                      "userId": {
                        "type": "string",
                        "description": "利用者ID"
                      },
                      "document": {
                        "type": "array",
                        "description": "ドキュメント",
                        "items": {
                          "type": "object",
                          "description": "カタログコード",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "event": {
                        "type": "array",
                        "description": "イベント",
                        "items": {
                          "type": "object",
                          "description": "カタログコード",
                          "$ref": "#/components/schemas/_code"
                        }
                      },
                      "thing": {
                        "type": "array",
                        "description": "モノ",
                        "items": {
                          "type": "object",
                          "description": "カタログコード",
                          "$ref": "#/components/schemas/_code"
                        }
                      }
                    },
                    "example": {
                      "accessAt": {
                        "start": "2020-08-01T00:00:00.000+0900",
                        "end": "2020-09-01T00:00:00.000+0900"
                      },
                      "app": null,
                      "wf": {
                        "_value": 1000115
                      },
                      "userId": "test_user",
                      "document": [
                        {
                          "_value": 1000431,
                          "_ver": 1
                        }
                      ],
                      "event": [
                        {
                          "_value": 1000002,
                          "_ver": 1
                        }
                      ],
                      "thing": [
                        {
                          "_value": 1000003,
                          "_ver": 1
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "個人用共有アクセスログ取得に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "array",
                      "description": "個人用共有アクセスログ取得レスポンスボディ",
                      "items": {
                        "$ref": "#/components/schemas/accessLogRes"
                      }
                    },
                    "example": [
                      {
                        "type": 1,
                        "actor": {
                          "_value": 1000117
                        },
                        "app": null,
                        "wf": {
                          "_value": 1000120
                        },
                        "document": [
                          {
                            "_code": {
                              "_value": 1000431,
                              "_ver": 1
                            },
                            "count": 1
                          }
                        ],
                        "event": [
                          {
                            "_code": {
                              "_value": 1000002,
                              "_ver": 1
                            },
                            "count": 3
                          }
                        ],
                        "thing": [
                          {
                            "_code": {
                              "_value": 1000003,
                              "_ver": 1
                            },
                            "count": 5
                          }
                        ]
                      }
                    ]
                  }
                }
              }
            }
          }
        },
        "/document/{userId}": {
          "post": {
            "tags": [
              "ドキュメント蓄積"
            ],
            "description": "利用者ID、ドキュメントを受け、Bookへ登録する。データ蓄積条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              }
            ],
            "requestBody": {
              "description": "ドキュメント蓄積のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "ドキュメント蓄積のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ドキュメント識別子",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "ドキュメント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "createdAt": {
                        "type": "object",
                        "description": "ドキュメント作成時間",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "chapter": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "202108-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "ドキュメント蓄積に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ドキュメント蓄積のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ドキュメント識別子",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "ドキュメント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "createdAt": {
                          "type": "object",
                          "description": "ドキュメント作成時間",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "chapter": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "20200221-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "put": {
            "tags": [
              "ソースIDによるドキュメント更新"
            ],
            "description": "ソースID、利用者ID、ドキュメントを受け、Bookのドキュメントを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること、およびソースIDに紐づくドキュメントが1つであること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "query",
                "name": "documentSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "ドキュメントのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "requestBody": {
              "description": "ソースIDによるドキュメント更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "ソースIDによるドキュメント更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ドキュメント識別子",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "ドキュメント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "createdAt": {
                        "type": "object",
                        "description": "ドキュメント作成時間",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "chapter": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "202108-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "ソースIDによるドキュメント更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるドキュメント更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ドキュメント識別子",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "ドキュメント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "createdAt": {
                          "type": "object",
                          "description": "ドキュメント作成時間",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "chapter": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": null
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "202108-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "ソースIDによるドキュメント削除"
            ],
            "description": "ソースIDを受け、Bookのドキュメントを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "query",
                "name": "documentSourceId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "ドキュメントのソースID",
                  "example": "20200221-1"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "ソースIDによるドキュメント削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ソースIDによるドキュメント削除のレスポンスボディ",
                      "properties": {
                        "schema": {
                          "type": "object",
                          "description": "ソースIDによるドキュメント削除のレスポンスボディ",
                          "properties": {
                            "id": {
                              "type": "object",
                              "description": "ドキュメント識別子",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "code": {
                              "type": "object",
                              "description": "ドキュメント種別カタログ",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "createdAt": {
                              "type": "object",
                              "description": "ドキュメント作成時間",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "sourceId": {
                              "type": "string",
                              "description": "ソースID"
                            },
                            "wf": {
                              "type": "object",
                              "description": "ワークフロー",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "app": {
                              "type": "object",
                              "description": "アプリケーション",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "chapter": {
                              "type": "object",
                              "description": "モノ",
                              "$ref": "#/components/schemas/_index_code"
                            }
                          }
                        },
                        "example": {
                          "id": {
                            "index": "2_1_1",
                            "value": null
                          },
                          "code": {
                            "index": "2_1_2",
                            "value": {
                              "_value": 1000008,
                              "_ver": 1
                            }
                          },
                          "createdAt": {
                            "index": "2_2_1",
                            "value": "2020-02-20T00:00:00.000+0900"
                          },
                          "sourceId": "202108-1",
                          "wf": {
                            "code": {
                              "index": "2_3_1",
                              "value": {
                                "_value": 1000117,
                                "_ver": 1
                              }
                            },
                            "wf": {
                              "index": "2_3_2",
                              "value": {
                                "_value": 1000007,
                                "_ver": 1
                              }
                            },
                            "role": {
                              "index": "2_3_3",
                              "value": {
                                "_value": 1000005,
                                "_ver": 1
                              }
                            },
                            "staffId": {
                              "index": "2_3_4",
                              "value": "wf01"
                            }
                          },
                          "chapter": [
                            {
                              "title": "イベント識別子",
                              "event": [
                                "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                              ],
                              "sourceId": [
                                "202108-1-1"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          }
        },
        "/document/{userId}/{documentId}": {
          "put": {
            "tags": [
              "ドキュメント更新"
            ],
            "description": "ID、利用者ID、ドキュメントを受け、Bookのドキュメントを更新する。更新条件は、データ蓄積定義が存在しAPIトークン照合が成功すること。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "documentId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "ドキュメントID",
                  "example": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                }
              }
            ],
            "requestBody": {
              "description": "ドキュメント更新のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "ドキュメント更新のリクエストボディ",
                    "properties": {
                      "id": {
                        "type": "object",
                        "description": "ドキュメント識別子",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "code": {
                        "type": "object",
                        "description": "ドキュメント種別カタログ",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "createdAt": {
                        "type": "object",
                        "description": "ドキュメント作成時間",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "sourceId": {
                        "type": "string",
                        "description": "ソースID"
                      },
                      "wf": {
                        "type": "object",
                        "description": "ワークフロー",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "app": {
                        "type": "object",
                        "description": "アプリケーション",
                        "$ref": "#/components/schemas/_index_code"
                      },
                      "chapter": {
                        "type": "object",
                        "description": "モノ",
                        "$ref": "#/components/schemas/_index_code"
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "202108-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "イベント更新に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "イベント更新のレスポンスボディ",
                      "properties": {
                        "id": {
                          "type": "object",
                          "description": "ドキュメント識別子",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "code": {
                          "type": "object",
                          "description": "ドキュメント種別カタログ",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "createdAt": {
                          "type": "object",
                          "description": "ドキュメント作成時間",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "sourceId": {
                          "type": "string",
                          "description": "ソースID"
                        },
                        "wf": {
                          "type": "object",
                          "description": "ワークフロー",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "app": {
                          "type": "object",
                          "description": "アプリケーション",
                          "$ref": "#/components/schemas/_index_code"
                        },
                        "chapter": {
                          "type": "object",
                          "description": "モノ",
                          "$ref": "#/components/schemas/_index_code"
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "2_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "2_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "createdAt": {
                        "index": "2_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "sourceId": "20200221-1",
                      "wf": {
                        "code": {
                          "index": "2_3_1",
                          "value": {
                            "_value": 1000117,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "2_3_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "2_3_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "2_3_4",
                          "value": "wf01"
                        }
                      },
                      "chapter": [
                        {
                          "title": "イベント識別子",
                          "event": [
                            "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                          ],
                          "sourceId": [
                            "202108-1-1"
                          ]
                        }
                      ]
                    }
                  }
                }
              }
            }
          },
          "delete": {
            "tags": [
              "ドキュメント削除"
            ],
            "description": "IDを受け、Bookのドキュメントを削除する。",
            "parameters": [
              {
                "in": "path",
                "name": "userId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "利用者ID",
                  "example": "123456789"
                }
              },
              {
                "in": "path",
                "name": "documentId",
                "required": true,
                "schema": {
                  "type": "string",
                  "description": "ドキュメントID",
                  "example": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                }
              }
            ],
            "responses": {
              "200": {
                "description": "ドキュメント削除に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "ドキュメント削除のレスポンスボディ",
                      "properties": {
                        "schema": {
                          "type": "object",
                          "description": "ソースIDによるイベント更新のレスポンスボディ",
                          "properties": {
                            "id": {
                              "type": "object",
                              "description": "ドキュメント識別子",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "code": {
                              "type": "object",
                              "description": "ドキュメント種別カタログ",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "createdAt": {
                              "type": "object",
                              "description": "ドキュメント作成時間",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "sourceId": {
                              "type": "string",
                              "description": "ソースID"
                            },
                            "wf": {
                              "type": "object",
                              "description": "ワークフロー",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "app": {
                              "type": "object",
                              "description": "アプリケーション",
                              "$ref": "#/components/schemas/_index_code"
                            },
                            "chapter": {
                              "type": "object",
                              "description": "モノ",
                              "$ref": "#/components/schemas/_index_code"
                            }
                          }
                        },
                        "example": {
                          "id": {
                            "index": "2_1_1",
                            "value": null
                          },
                          "code": {
                            "index": "2_1_2",
                            "value": {
                              "_value": 1000008,
                              "_ver": 1
                            }
                          },
                          "createdAt": {
                            "index": "2_2_1",
                            "value": "2020-02-20T00:00:00.000+0900"
                          },
                          "sourceId": "202108-1",
                          "wf": {
                            "code": {
                              "index": "2_3_1",
                              "value": {
                                "_value": 1000117,
                                "_ver": 1
                              }
                            },
                            "wf": {
                              "index": "2_3_2",
                              "value": {
                                "_value": 1000007,
                                "_ver": 1
                              }
                            },
                            "role": {
                              "index": "2_3_3",
                              "value": {
                                "_value": 1000005,
                                "_ver": 1
                              }
                            },
                            "staffId": {
                              "index": "2_3_4",
                              "value": "wf01"
                            }
                          },
                          "chapter": [
                            {
                              "title": "イベント識別子",
                              "event": [
                                "fedc51ce-2efd-4ade-9bbe-45dc445ae9c6"
                              ],
                              "sourceId": [
                                "202108-1-1"
                              ]
                            }
                          ]
                        }
                      }
                    },
                    "example": {
                      "id": {
                        "index": "3_1_1",
                        "value": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu"
                      },
                      "code": {
                        "index": "3_1_2",
                        "value": {
                          "_value": 1000008,
                          "_ver": 1
                        }
                      },
                      "start": {
                        "index": "3_2_1",
                        "value": "2020-02-20T00:00:00.000+0900"
                      },
                      "end": {
                        "index": "3_2_2",
                        "value": "2020-02-21T00:00:00.000+0900"
                      },
                      "location": {
                        "index": "3_3_1",
                        "value": null
                      },
                      "sourceId": "20200221-1",
                      "env": null,
                      "app": null,
                      "wf": {
                        "code": {
                          "index": "3_5_1",
                          "value": {
                            "_value": 1000004,
                            "_ver": 1
                          }
                        },
                        "wf": {
                          "index": "3_5_2",
                          "value": {
                            "_value": 1000007,
                            "_ver": 1
                          }
                        },
                        "role": {
                          "index": "3_5_3",
                          "value": {
                            "_value": 1000005,
                            "_ver": 1
                          }
                        },
                        "staffId": {
                          "index": "3_5_4",
                          "value": "test"
                        }
                      },
                      "thing": []
                    }
                  }
                }
              }
            }
          }
        },
        "/store-event/receive": {
          "post": {
            "tags": [
              "蓄積イベント受信"
            ],
            "description": "通知された蓄積イベントを AWS SNS を通じて共有API利用主体に通知します。",
            "requestBody": {
              "description": "蓄積イベント受信のリクエストボディ",
              "required": true,
              "content": {
                "application/json": {
                  "schema": {
                    "type": "object",
                    "description": "蓄積イベント受信のリクエストボディ",
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "送信種別"
                      },
                      "operate": {
                        "type": "string",
                        "description": "処理種別"
                      },
                      "userId": {
                        "type": "string",
                        "description": "利用者ID"
                      },
                      "identifier": {
                        "type": "string",
                        "description": "データID"
                      },
                      "document": {
                        "type": "object",
                        "description": "ドキュメント種別カタログコード",
                        "$ref": "#/components/schemas/_code"
                      },
                      "event": {
                        "type": "object",
                        "description": "イベント種別カタログコード",
                        "$ref": "#/components/schemas/_code"
                      },
                      "thing": {
                        "type": "object",
                        "description": "モノ種別カタログコード",
                        "$ref": "#/components/schemas/_code"
                      },
                      "sourceActor": {
                        "type": "object",
                        "description": "共有元アクター",
                        "$ref": "#/components/schemas/_code"
                      },
                      "sourceApp": {
                        "type": "object",
                        "description": "共有元アプリケーション",
                        "$ref": "#/components/schemas/_code"
                      },
                      "sourceWf": {
                        "type": "object",
                        "description": "共有元ワークフロー",
                        "$ref": "#/components/schemas/_code"
                      },
                      "destinationActor": {
                        "type": "object",
                        "description": "共有先アクター",
                        "$ref": "#/components/schemas/_code"
                      },
                      "destinationApp": {
                        "type": "object",
                        "description": "共有先アプリケーション",
                        "$ref": "#/components/schemas/_code"
                      },
                      "destinationWf": {
                        "type": "object",
                        "description": "共有先ワークフロー",
                        "$ref": "#/components/schemas/_code"
                      }
                    },
                    "example": {
                      "type": "store-event",
                      "operate": "add",
                      "userId": "test.user.id",
                      "identifier": "uuuuuuuu-uuuu-uuuu-uuuu-uuuuuuuuuuuu",
                      "document": {
                        "_value": 1000132,
                        "_ver": 1
                      },
                      "sourceActor": {
                        "_value": 1000003,
                        "_ver": 1
                      },
                      "sourceWf": {
                        "_value": 1000004,
                        "_ver": 1
                      },
                      "destinationActor": {
                        "_value": 1000439,
                        "_ver": 1
                      },
                      "destinationWf": {
                        "_value": 1000501,
                        "_ver": 1
                      }
                    }
                  }
                }
              }
            },
            "responses": {
              "200": {
                "description": "蓄積イベントの受信に成功した際のレスポンスコード",
                "content": {
                  "application/json": {
                    "schema": {
                      "type": "object",
                      "description": "蓄積イベント受信のレスポンスボディ",
                      "properties": {
                        "result": {
                          "type": "string",
                          "description": "処理結果"
                        }
                      }
                    },
                    "example": {
                      "result": "success"
                    }
                  }
                }
              }
            }
          }
        }
      },
      "components": {
        "schemas": {
          "userListOneOf": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/statusCoop"
              },
              {
                "$ref": "#/components/schemas/statusRequest"
              }
            ]
          },
          "statusCoop": {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "description": "ステータス"
              },
              "userId": {
                "type": "string",
                "description": "利用者ID"
              },
              "app": {
                "type": "object",
                "description": "アプリケーションカタログ",
                "$ref": "#/components/schemas/_code"
              },
              "wf": {
                "type": "object",
                "description": "ワークフローカタログ",
                "$ref": "#/components/schemas/_code"
              },
              "establishAt": {
                "type": "string",
                "description": "開設日時"
              },
              "attributes": {
                "type": "object",
                "description": "属性"
              },
              "store": {
                "type": "array",
                "description": "store",
                "items": {
                  "$ref": "#/components/schemas/store"
                }
              }
            }
          },
          "statusRequest": {
            "type": "object",
            "properties": {
              "status": {
                "type": "number",
                "description": "ステータス"
              },
              "identifyCode": {
                "type": "string",
                "description": "本人性確認コード"
              }
            }
          },
          "_code": {
            "type": "object",
            "properties": {
              "_value": {
                "type": "integer",
                "description": "カタログコード"
              },
              "_ver": {
                "type": "integer",
                "description": "カタログバージョン"
              }
            }
          },
          "store": {
            "type": "object",
            "properties": {
              "event": {
                "$ref": "#/components/schemas/_code"
              },
              "thing": {
                "type": "array",
                "description": "thing",
                "items": {
                  "$ref": "#/components/schemas/_code"
                }
              }
            }
          },
          "_index_code": {
            "type": "object",
            "properties": {
              "index": {
                "type": "string",
                "description": "インデックス"
              },
              "value": {
                "type": "object",
                "description": "値",
                "$ref": "#/components/schemas/_code"
              }
            }
          },
          "_index_value": {
            "type": "object",
            "properties": {
              "index": {
                "type": "string",
                "description": "インデックス"
              },
              "value": {
                "type": "string",
                "description": "値"
              }
            }
          },
          "bookListOneOf": {
            "oneOf": [
              {
                "$ref": "#/components/schemas/event"
              }
            ]
          },
          "event": {
            "type": "object",
            "properties": {
              "id": {
                "type": "object",
                "description": "イベントID",
                "$ref": "#/components/schemas/_index_value"
              },
              "code": {
                "type": "object",
                "description": "カタログコード",
                "$ref": "#/components/schemas/_index_code"
              },
              "start": {
                "type": "object",
                "description": "イベント開始日時",
                "$ref": "#/components/schemas/_index_value"
              },
              "end": {
                "type": "object",
                "description": "イベント終了日時",
                "$ref": "#/components/schemas/_index_value"
              },
              "location": {
                "type": "object",
                "description": "イベント発生位置",
                "$ref": "#/components/schemas/_index_value"
              },
              "sourceId": {
                "type": "string",
                "description": "ソースID"
              },
              "env": {
                "type": "object",
                "description": "イベント種別識別子カタログ",
                "$ref": "#/components/schemas/_index_code"
              },
              "app": {
                "type": "object",
                "description": "アプリケーション識別子カタログ",
                "$ref": "#/components/schemas/_index_code"
              },
              "wf": {
                "type": "object",
                "description": "ワークフロー識別子カタログ",
                "$ref": "#/components/schemas/_index_code"
              },
              "role": {
                "type": "object",
                "description": "ワークフローロール識別子カタログ",
                "$ref": "#/components/schemas/_index_code"
              },
              "thing": {
                "type": "array",
                "description": "モノ",
                "items": {
                  "$ref": "#/components/schemas/thing"
                }
              }
            }
          },
          "thing": {
            "type": "object",
            "properties": {
              "acquired_time": {
                "type": "object",
                "description": "捕捉時間",
                "$ref": "#/components/schemas/_index_value"
              },
              "code": {
                "type": "object",
                "description": "カタログコード",
                "$ref": "#/components/schemas/_index_code"
              },
              "env": {
                "type": "object",
                "description": "モノ種別識別子カタログ",
                "$ref": "#/components/schemas/_index_code"
              },
              "sourceId": {
                "type": "string",
                "description": "ソースID"
              },
              "id": {
                "type": "object",
                "description": "モノID",
                "$ref": "#/components/schemas/_index_value"
              },
              "x-axis": {
                "type": "object",
                "description": "X軸",
                "$ref": "#/components/schemas/_index_value"
              },
              "y-axis": {
                "type": "object",
                "description": "Y軸",
                "$ref": "#/components/schemas/_index_value"
              },
              "z-axis": {
                "type": "object",
                "description": "Z軸",
                "$ref": "#/components/schemas/_index_value"
              }
            }
          },
          "accessLogRes": {
            "type": "object",
            "properties": {
              "type": {
                "type": "integer",
                "description": "種別"
              },
              "actor": {
                "type": "object",
                "description": "アクターコード",
                "properties": {
                  "_value": {
                    "type": "integer",
                    "description": "アクターコード"
                  }
                }
              },
              "app": {
                "type": "object",
                "description": "アプリケーションコード",
                "properties": {
                  "_value": {
                    "type": "integer",
                    "description": "アプリケーションコード"
                  }
                }
              },
              "wf": {
                "type": "object",
                "description": "ワークフローコード",
                "properties": {
                  "_value": {
                    "type": "integer",
                    "description": "ワークフローコード"
                  }
                }
              },
              "document": {
                "type": "array",
                "description": "ドキュメント",
                "items": {
                  "type": "object",
                  "description": "カタログコード",
                  "$ref": "#/components/schemas/_code"
                }
              },
              "event": {
                "type": "array",
                "description": "イベント",
                "items": {
                  "type": "object",
                  "description": "カタログコード",
                  "$ref": "#/components/schemas/_code"
                }
              },
              "thing": {
                "type": "array",
                "description": "モノ",
                "items": {
                  "type": "object",
                  "description": "カタログコード",
                  "$ref": "#/components/schemas/_code"
                }
              }
            }
          },
          "consent": {
            "type": "object",
            "properties": {
              "userId": {
                "type": "string",
                "description": "利用者ID"
              },
              "maskId": {
                "type": "string",
                "description": "データ提供用ID"
              }
            }
          }
        }
      }
    }
  ormconfig.json: |
    {
      "name": "postgres",
      "type": "postgres",
      "host": "external-db-service",
      "port": 5432,
      "database": "<database_name>",
      "schema": "pxr_book_operate",
      "username": "<user_name>",
      "password": "<password>",
      "synchronize": false,
      "logging": false
    }
